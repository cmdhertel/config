"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5116],{21213:(e,t,o)=>{o.r(t),o.d(t,{ConfigureIntegrationModal:()=>E});var n=o(97464),i=o.n(n),r=o(77094),a=o.n(r),s=o(67294),l=o(480),d=o(81954),c=o(24405),p=o(3779),g=o(5366),u=o(9844),h=o(35794),f=o(82990),m=o(64002),b=o(47307),w=o(761),y=o(1790),v=o(33929),k=o(33665),M=o(25464),I=o(79315),S=o(74021),x=o(31622),Z=o(42922),U=o(64921),T=o(71669),C=o(74194),P=o(68785),B=o(58032),L=o(92660),R=o(74523),_=o(13490);const D=(0,g.defineMessages)({webhookUrlPlaceholder:{id:"integrations.configureIntegrationModal.webhookUrlInput.placeholder",defaultMessage:"Paste webhook URL",description:"Placeholder text for webhook URL input"},webhookSecretPlaceholder:{id:"integrations.configureIntegrationModal.webhookSecretInput.placeholder",defaultMessage:"Paste secret code",description:"Placeholder text for webhook secret input"},updateButton:{id:"integrations.configureIntegrationModal.submitButton.update",defaultMessage:"Update",description:"Submit button text when updating a webhook subscription"},createButton:{id:"integrations.configureIntegrationModal.submitButton.create",defaultMessage:"Create",description:"Submit button text when creating a webhook subscription"},errorOccurred:{id:"integrations.configureIntegrationModal.error.dialog",defaultMessage:"Failed to connect {integration}. Please contact support.",description:"Error message when failed to connect integration"}});function E(){window.__c={n:"ConfigureIntegrationModal"};const e=(0,l.O7)(),t=(0,c.yK)((e=>({errorText:{color:e.errorText,fontSize:12},modal:{maxWidth:400,padding:24,fontSize:14,textAlign:"center",borderRadius:10},input:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:300},helpInfo:{display:"inline-flex",marginLeft:2},connect:{marginTop:20,width:300},title:{fontWeight:f.Z.fontWeight.medium,marginBottom:2},subTitle:{fontWeight:f.Z.fontWeight.regular,color:e.lightTextColor,marginTop:2},innerStyle:{borderRadius:10},mobileModal:{fontSize:14,textAlign:"center"},innerModal:{padding:"0px 8px",display:"flex",flexDirection:"column",alignItems:"center"},integrationIcon:{width:40,height:40},hovered:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.mediumTextColor},cancelButton:{position:"absolute",top:"10px",right:"10px",background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}})),[]),o=(0,d.VK)((()=>S.Z.state.open?S.Z.state.integrationId:void 0),[]),n=(0,d.VK)((()=>S.Z.state.open?S.Z.state.webhookSubscriptionId:void 0),[]),r=(0,d.VK)((()=>I.default.state.currentSpaceStore),[]),E=o&&r?x.y2.createChildStore(r,{id:o,table:u.K2}):void 0,F=n&&r?x.n4.createChildStore(r,{id:n,table:h.b,spaceId:r.id}):void 0;(0,s.useEffect)((()=>{const{webhookUrl:e,webhookSecret:t}={webhookUrl:(null==F?void 0:F.getWebhookUrl())||"",webhookSecret:(null==F?void 0:F.getWebhookSecret())||""};W(e),O(t)}),[F]);const[K,W]=s.useState(""),[N,O]=s.useState(""),[V,z]=s.useState(!1),[q,A]=s.useState(!1),H=(0,d.VK)((()=>{if(E)return E.getModel()}),[E]),Y=(0,d.VK)((()=>null==H?void 0:H.getInfo()),[H]);if(!H||!Y)return null;const j=e=>{e&&(A(!1),b.showErrorMessage(v.default.formatMessage(D.errorOccurred,{integration:Y.developer_name})))},J=async()=>{if(!q){if(!(0,m.yn)(K))return z(!0),void A(!1);z(!1),A(!0),await y.E({environment:e,integration:H,webhookUrl:K,webhookSecret:N,webhookSubscriptionId:n,onError:j}),await w.pJ({environment:e}),G()}},G=()=>{S.Z.setState({open:!1}),W(""),O(""),z(!1),A(!1)};return a()(L.Z,{innerStyle:t.modal,requireOnline:!0,modalStore:S.Z,onDismiss:G,render:()=>a()("div",{style:t.mobileModal},void 0,a()("div",{style:t.innerModal},void 0,a()(U.Z,{onClick:G,style:t.cancelButton,hoveredStyle:t.hovered},void 0,p.Z.closeSmall(t.closeIcon)),a()("div",{style:t.integrationIcon},void 0,a()(T.Z,{style:t.integrationIcon,src:Y.icon})),a()("p",{style:t.title},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationName",defaultMessage:"Connect {integrationName} to Notion",description:"Title for the modal that allows users to configure an integration.",values:{integrationName:Y.developer_name||"Unknown"}})),a()("p",{style:t.subTitle},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationTagline",defaultMessage:"{integrationName} is an easy to use, intelligent data leak prevention for SaaS & cloud apps.",description:"Title for the modal that allows users to configure an integration.",values:{integrationName:Y.developer_name||"Unknown"}})),a()("div",{style:t.input},void 0,a()(_.Z,{hasMarginTop:!0,style:{display:"flex",alignItems:"center"}},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookUrlInput",defaultMessage:"Webhook URL",description:"Label for the input field that allows users to paste their webhook URL."}),a()(B.Z,{placement:M.u.Bottom,render:e=>s.createElement(R.Z,i()({},e,{href:(0,k.UY)("guides.guides"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo})),renderTooltip:()=>a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookUrlInput.tooltip",defaultMessage:"Copy the webhook URL from the partner connection settings page",description:"Tooltip for the input field that allows users to paste their webhook URL."})})),a()(C.Z,{type:"text",style:{padding:"4px 8px"},value:K,onChange:e=>{W(e.target.value),z(!1)},placeholder:v.default.formatMessage(D.webhookUrlPlaceholder),focusInitial:!0,onKeyDown:async e=>{"Enter"===e.key&&await J()}}),V?a()("div",{style:{marginTop:5,...t.errorText}},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidUrl",defaultMessage:"Invalid webhook URL",description:"Error message shown when the user enters an invalid URL."})):null),a()("div",{style:t.input},void 0,a()(_.Z,{hasMarginTop:!0,style:{display:"flex",alignItems:"center"}},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookSecretCode",defaultMessage:"Secret code",description:"Label for the input field that allows users to paste their webhook secret code."}),a()(B.Z,{placement:M.u.Bottom,render:e=>s.createElement(R.Z,i()({},e,{href:(0,k.UY)("guides.guides"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo})),renderTooltip:()=>a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookSecretInput.tooltip",defaultMessage:"Copy the webhook secret from the partner connection settings page",description:"Tooltip for the input field that allows users to paste their webhook secret."})})),a()(C.Z,{type:"text",value:N,onChange:e=>O(e.target.value),placeholder:v.default.formatMessage(D.webhookSecretPlaceholder),style:{padding:"4px 8px"},focusInitial:!1,onKeyDown:async e=>{"Enter"===e.key&&await J()}})),a()(Z.Z,{style:t.connect,onClick:J,disabled:""===K},void 0,q?a()(P.Z,{}):a()("span",{},void 0,n?v.default.formatMessage(D.updateButton):v.default.formatMessage(D.createButton)))))})}},92660:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(77094),i=o.n(n),r=(o(67294),o(83355)),a=o(22346),s=o(44532);class l extends r.Z{renderComponent(){const{render:e}=this.props,{device:t}=this.environment,o=this.props.modalStore.state;return t.isMobile?i()(s.ZP,{open:o.open,popupType:s.ZP.PopupType.SlideUp,origin:this.props.origin,onDismiss:this.props.onDismiss,render:e,style:this.props.style}):i()(a.Z,{open:o.open,preventHideChildrenWhileOpening:!0,render:e,onDismiss:this.props.onDismiss,style:this.props.style,innerStyle:this.props.innerStyle})}}l.displayName="DefaultPopupOrModal"},74021:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.Z{getInitialState(){return{open:!1}}}const r=new i}}]);