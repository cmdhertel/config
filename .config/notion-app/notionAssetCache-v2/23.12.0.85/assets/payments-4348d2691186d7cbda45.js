"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7983],{80567:(e,t,a)=>{a.d(t,{a:()=>n});var i=a(19234),r=a(54642);async function n(e,t){const a=(0,i.gq)(t);if("skip"===a)return{valid:!0};if("insufficient_data"===a)return{valid:!1};const n=await r.resolveAddress(e,{address:{line1:t.addressLine1,city:t.city,zip:t.zipCode,state:t.state,country:t.country}});return"failed"===n.type?{valid:!1}:n.data}},65544:(e,t,a)=>{a.d(t,{W:()=>c,n:()=>p});var i=a(19234),r=a(62216),n=a(21115),o=a(27242),s=a(78291),d=a(8711),l=a(54642);async function c(e){const t=o.Z.state,a=s.default.state.data;if(!t.open||!a)return;if(t.vatApplicable&&t.temporaryVatCode&&!r.Ww())return void o.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));const d=t.temporaryAddress;if("insufficient_data"===(0,i.gq)(d))return;let c;if(o.Z.update((e=>({...e,calculatingTax:!0}))),t.type===o.U.TargetSpace)c=t.totalUpgradeCost||0;else{const{planAmount:e,promoInfo:i,creditAmount:r,accountBalance:o}=(0,n.uN)({state:t,promo:t.appliedPromo,data:a});c=Math.max(0,e-i.amount-r+o)}const p=await l.calculateTax(e,{address:d,price:c,vatId:t.vatApplicable?t.temporaryVatCode:void 0});if("failed"===p.type)o.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=p.data;e.valid?o.Z.update((t=>({...t,taxAmount:e.taxAmount,calculatingTax:!1}))):o.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})))}}async function p(e){const{environment:t,priceForTaxCalculation:a,address:i}=e,r=d.Z.state,n=await l.calculateTax(t,{address:i,price:a,vatId:void 0});if("failed"===n.type);else{const e=n.data;e.valid&&r.open&&d.Z.update((t=>({...t,tax:Math.max(0,e.taxAmount)})))}}},93039:(e,t,a)=>{a.d(t,{J:()=>x});var i=a(97464),r=a.n(i),n=a(77094),o=a.n(n),s=a(67294),d=a(480),l=a(24405),c=a(31942),p=a(59054),u=a(97880),m=a(5366),g=a(50906),y=a(54642),f=a(80366),v=a(60709),b=a(27242),h=a(52275),S=a(74194),M=a(78140),w=a(9342),C=a(44532),T=a(72495);function x(e){window.__c={n:"SpaceSubscriptionAddressForm"};const t=(0,l.yK)((e=>({container:(0,f.s)(e),cityZipRow:{display:"flex"},verticalDivider:{display:"flex",borderLeft:"1px solid",borderLeftColor:e.groupedFormBorder},zipRow:{display:"flex",flex:2},stateRow:{display:"flex",flex:3}})),[]),a=(0,m.useIntl)(),i=(0,d.O7)();return o()("div",{},void 0,o()("div",{style:t.container},void 0,o()(F,{placeholder:a.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.fullName",defaultMessage:"Full name"}),address:e.address,updateAddress:e.updateAddress,addressKey:"name",environment:i}),e.shouldShowBusinessName&&o()(F,{placeholder:a.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.businessName",defaultMessage:"Business name (optional)"}),address:e.address,updateAddress:e.updateAddress,addressKey:"businessName",environment:i}),o()(U,{updateAddress:e.updateAddress,address:e.address}),e.address&&s.createElement(s.Fragment,null,o()(F,{placeholder:a.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.address",defaultMessage:"Address"}),address:e.address,addressKey:"addressLine1",updateAddress:e.updateAddress,environment:i}),o()(F,{placeholder:a.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.city",defaultMessage:"City"}),addressKey:"city",address:e.address,updateAddress:e.updateAddress,environment:i}),o()("div",{style:t.cityZipRow},void 0,o()("div",{style:t.stateRow},void 0,o()(F,{placeholder:a.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.state",defaultMessage:"State / Province"}),address:e.address,addressKey:"state",updateAddress:e.updateAddress,environment:i})),o()("div",{style:t.verticalDivider}),o()("div",{style:t.zipRow},void 0,o()(F,{placeholder:a.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.zipCode",defaultMessage:"Zip code"}),address:e.address,addressKey:"zipCode",updateAddress:e.updateAddress,environment:i}))))))}function U(e){window.__c={n:"CountryDropdown"};const t=(0,d.O7)(),[a,i]=(0,s.useState)(!1),n=(0,m.useIntl)(),x=(0,l.yK)((()=>({input:{background:"none",boxShadow:"none",padding:8,fontSize:14}})),[]),[U,F]=s.useState(""),[Z]=(0,p.r5)((async()=>{const e=await y.getAvailableCountries(t,{});return"success"===e.type?e.data.countries:"failed"===e.type?[]:void(0,u.t1)(e)}),[t]),A=Z.value;if(!A)return null;const k=(0,c.ZP)(U,A,(e=>e.name)).map(((a,n)=>({key:n,render:e=>s.createElement(h.Z,r()({},e,{title:a.name})),action:()=>{a.countryCode!==e.address.country&&e.updateAddress({addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:a.countryCode});const r=b.Z.state;r.open&&b.Z.setState({...r,vatApplicable:Boolean(a.vatApplicable)}),F(a.name),i(!1),g.trackSubscriptionUpgradeModalAddressFormUpdated(t,{addressType:"country",addressUpdate:a.name})}})));return o()(f.c,{},void 0,o()(C.ZP,{popupType:C.ZP.PopupType.Popup,alignmentToOrigin:C.ZP.Alignment.End,placementToOrigin:C.ZP.Placement.Right,originGap:0,open:a,origin:o()(S.Z,{value:U,focus:a,placeholder:n.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.country",defaultMessage:"Country or region"}),style:x.input,onChange:t=>{F(t.target.value),e.updateAddress({country:void 0})},onFocus:()=>{i(!0)}}),onDismiss:()=>{i(!1)},render:()=>o()(M.Z,{menuType:v.og.Popup,width:"100%"},void 0,o()(w.Z,{type:w.i.Vertical,initialFocus:U.length>0?0:void 0,sections:[{key:0,showNoResultMessage:!0,render:e=>s.createElement(T.Z,r()({},e,{title:o()(m.FormattedMessage,{id:"spaceSubscriptionBillingInfoForm.countryDropdown.title",defaultMessage:"Select a country or region"})})),items:k}]}))}))}function F(e){window.__c={n:"InputField"};const t=(0,l.yK)((()=>({input:{background:"none",boxShadow:"none",padding:8,fontSize:14}})),[]);return o()(f.c,{},void 0,o()(S.Z,{value:e.address[e.addressKey],style:t.input,placeholder:e.placeholder,onBlur:(a=e.updateAddress,i=e.addressKey,r=e.environment,e=>{g.trackSubscriptionUpgradeModalAddressFormUpdated(r,{addressType:i,addressUpdate:e.target.value}),a({[i]:e.target.value})}),onChange:t=>e.updateAddress({[e.addressKey]:t.target.value})}));var a,i,r}},10644:(e,t,a)=>{a.d(t,{Z:()=>c});var i=a(77094),r=a.n(i),n=(a(67294),a(83355)),o=a(5366),s=a(64369),d=a(27386);class l extends n.Z{renderComponent(){return r()(d.Z,{},void 0,r()(s.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,r()(o.FormattedMessage,{id:"spaceSubscriptionPlans.offlineMessage",defaultMessage:"Please go online to manage your plan."})))}}l.displayName="SpaceSubscriptionPlansOfflineMessage";const c=l},10024:(e,t,a)=>{a.r(t),a.d(t,{default:()=>gt});var i=a(77094),r=a.n(i),n=a(67294),o=a(480),s=a(81954),d=a(24405),l=a(8848),c=a(88108),p=a(3779),u=a(5366),m=a(86664),g=a(65917),y=a(90850),f=a(3791),v=a(16100),b=a(21115),h=a(79315),S=a(92083),M=a(27242),w=a(80567),C=a(50906),T=a(54642),x=a(47307),U=a(92625),F=a(64964),Z=a(21325),A=a(65544);const k=(0,u.defineMessages)({loading:{defaultMessage:"Claiming and upgrading workspace...",id:"spaceSubscriptionUpgradeModal.upgradeTargetSpace.loading",description:"Loading state describing how we're in the process of claiming and upgrading the space."}});function I(e){const{environment:t}=e;M.Z.reset(),C.trackSubscriptionUpgradeModalDismissed(t)}async function P(e){const{environment:t,data:a,requestingSpaceId:i,stripeToken:n}=e,o=M.Z.state;if(!o.open)return;if(o.type!==M.U.TargetSpace)return;const s="year"===b.GD(o)?"enterprise_yearly_240":"enterprise_monthly_25",d=o.temporaryAddress;U.j({message:k.loading});const l=o.targetSpace.id,c=await T.claimAndUpgradeSpace(t,{requestingSpaceId:i,targetSpaceId:l,targetPlan:s,stripeToken:n,customerName:d.name,businessName:d.businessName,addressLine1:d.addressLine1,addressCity:d.city,addressZip:d.zipCode,addressState:d.state,addressCountry:d.country,vatId:o.vatApplicable?o.temporaryVatCode:void 0});var p,m;(U.x(),"success"===c.type)?(M.Z.closeWithSuccess(),m=o.targetSpace.name,F.oV({label:r()(u.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.toast",defaultMessage:"Successfully claimed “{spaceName}“",description:"Message in toast to indicate a workspace claim has been successfully processed.",values:{spaceName:m}})}),C.trackSpaceClaimUpgradeCompleted(t,{previousOwners:o.targetSpace.admins.map((e=>e.id)),newOwners:t.currentUser.id?[t.currentUser.id]:[],targetSpaceId:l,verifiedDomain:o.targetSpace.creatorEmailDomain,memberCount:o.targetSpace.memberCount,costForUpgrade:o.totalUpgradeCost,currentPlan:null===(p=b.XX(a))||void 0===p?void 0:p.plan,targetPlan:s})):(x.showError(c),I({environment:t}))}async function B(e){const{environment:t,state:a,data:i,requestingSpaceId:r,stripe:n,elements:o,intl:s,paymentOptionAvailabilityStore:d}=e,l=a.temporaryPaymentMethod;C.trackUpgradeSubscriptionClick(t,{paymentMethod:l});const c=d.state.paymentRequest;if("native_payment_platform"===l&&c)return void c.show();M.Z.update((e=>({...e,payButtonState:"disabled"})));const{valid:p}=await z({environment:t,state:a,intl:s});p&&await async function(e){const{environment:t,state:a,data:i,requestingSpaceId:r,stripe:n,elements:o,intl:s}=e;if("invoice"===a.temporaryPaymentMethod)return await O({environment:t,data:i,stripeToken:void 0,onComplete:void 0});if(!o||!n)return void g.log({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}});const d=o.getElement(m.CardElement);if(!d)return void g.log({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe Card Element could not be found"}});const l=await n.createToken(d);if(!l.error&&l.token){const e=l.token.id;a.type===M.U.TargetSpace?await P({environment:t,data:i,stripeToken:e,requestingSpaceId:r}):await O({environment:t,data:i,stripeToken:e,onComplete:void 0})}else l.error?(C.trackUpgradeSubscriptionFailed(t,{error:l.error.message,error_type:"credit_card"}),M.Z.setState({...a,error:v.translateStripeError(t,s,l.error)})):(C.trackUpgradeSubscriptionFailed(t,{error:"could not create token",error_type:"credit_card"}),M.Z.setState({...a,error:s.formatMessage({id:"spaceSubscriptionUpgradeModal.creditCard.genericError",defaultMessage:"Your card could not be processed. Please try again."})}))}({environment:t,state:a,data:i,requestingSpaceId:r,stripe:n,elements:o,intl:s});const u=M.Z.state;u.open&&M.Z.setState({...u,payButtonState:"enabled"})}async function O(e){const{environment:t,data:a,stripeToken:i,onComplete:r}=e,n=h.default.state.currentSpaceStore,o=M.Z.state;if(!o.open||!n)return void(r&&r("fail"));if(o.type===M.U.TargetSpace)return void(r&&r("fail"));const s=o.temporaryPaymentMethod,d=b.GD(o),l=b.Ry(o,a),c=b.Md(o,a),p=(0,b.vr)(o,d),u=o.appliedPromo,m=o.temporaryAddress;await Z.Mg({environment:t,spaceStore:n,plan:p,stripeToken:i,billingEmail:c,creditAmount:l,coupon:u&&"coupon"===u.source?u.code:void 0,customerName:m.name,businessName:m.businessName,addressLine1:m.addressLine1,addressCity:m.city,addressZip:m.zipCode,addressState:m.state,addressCountry:m.country,vatId:o.vatApplicable?o.temporaryVatCode:void 0,promoCodeId:u&&"promo_code"===u.source?u.code:void 0,from:"subscription_upgrade_modal",addOns:(0,f.aG)({addOnFeature:o.addOnFeature,addOnTier:"base",addOnBillingInterval:d,addOnPricingModel:"standard",addOnPricingVariant:(0,f._h)(d),isCancellation:!1}),useTestClock:o.useTestClock})?(C.trackSubscriptionUpgradeModalUpgradeAccepted(t,{paymentMethod:s}),r&&r("success"),u&&(0,y.$r)(t.currentUser.id),I({environment:t}),S.Z.setState({...S.Z.state,currentTab:"billing",defaultSubtab:void 0})):(C.trackUpgradeSubscriptionFailedPayment(t),r&&r("fail"))}async function _(e){const{spaceId:t,environment:a,state:i}=e;i.open&&i.type===M.U.TargetSpace&&await async function(e){const{requestingSpaceId:t,environment:a,state:i}=e;if(!i.open)return;if(i.type!==M.U.TargetSpace)return;M.Z.update((e=>({...e,totalUpgradeCost:void 0})));const r=i.targetSpace.isActorInSpace?i.targetSpace.memberCount:i.targetSpace.memberCount+1,n=await T.getCostForSpaceUpgrade(a,{targetSpaceId:i.targetSpace.id,requestingSpaceId:t,subscriptionTier:"enterprise",billingInterval:b.GD(i),memberCount:r});if("failed"===n.type)x.showError(n),M.Z.setState({open:!1});else{const e=n.data?Math.max(n.data.totalCost,0):void 0;M.Z.update((t=>({...t,totalUpgradeCost:e})))}}({requestingSpaceId:t,environment:a,state:i})}async function z(e){const{environment:t,intl:a,state:i}=e,r=i.temporaryAddress,n=await w.a(t,r);return n.valid&&n.validatedAddresses&&M.Z.setState({...i,temporaryAddress:{...i.temporaryAddress,...n.validatedAddresses[0]}}),"CA"===r.country?{valid:!0}:(n.valid||(r.country?M.Z.setState({...i,error:a.formatMessage({id:"spaceSubscriptionUpgradeModal.billingAddress.invalidError",defaultMessage:"Your address is invalid. Please update your address so we can process your payment."})}):M.Z.setState({...i,error:a.formatMessage({id:"spaceSubscriptionUpgradeModal.billingAddress.missingCountryError",defaultMessage:"Invalid country. Please select the country from the dropdown menu."})}),C.trackUpgradeSubscriptionFailed(t,{error:void 0,error_type:"address"})),n)}var E=a(95477),W=a(62216),D=a(34859),L=a(88632),N=a(45407),K=a(36488),R=a(22346),H=a(18647),V=a(97464),q=a.n(V),Y=a(96486),G=a(82990),j=a(80366),$=a(8323),Q=a(74194),J=a(58032),X=a(93039);function ee(e){window.__c={n:"SpaceSubscriptionBillingInfoForm"};const t=(0,o.O7)(),[a]=(0,n.useState)((()=>(0,Y.debounce)((async()=>{await A.W(t)}),3e3))),i=(0,s.VK)((()=>(0,$.mq)()),[]),[d]=(0,s.AF)(M.Z);if(!d.open)return null;const l=d.temporaryAddress,c=d.type===M.U.TargetSpace;return r()("div",{},void 0,r()(te,{storeState:e.storeState,paymentMethods:e.paymentMethods}),r()("div",{style:{marginTop:20}},void 0,r()(X.J,{address:l,updateAddress:async e=>{M.Z.setAddressField(e),await a()},shouldShowBusinessName:i})),!d.vatApplicable&&r()("div",{style:{marginBottom:20}}),r()(ae,{onUpdate:async()=>{await a()},disabled:c,tooltip:c?r()(u.FormattedMessage,{id:"spaceSubscriptionPaymentForm.billingInformation.disabledVatTooltip",defaultMessage:"You can add a VAT/GST number in the billing tab after upgrading.",description:"Tooltip explaining that VAT input is disabled in the claim and upgrade flow, indicating that it can be added after the claim has completed."}):void 0}))}function te(e){window.__c={n:"CardElementInput"};const t=(0,d.yK)((t=>({container:{...ie(t),padding:"5px 5px 5px 10px"},header:{...re(t),paddingTop:20},wrapper:{..."credit_card"!==e.storeState.temporaryPaymentMethod?{display:"none"}:void 0}})),[e.storeState.temporaryPaymentMethod]),a=(0,d.Fg)(),[i]=(0,s.AF)(M.Z);if(!i.open)return null;const n=1===e.paymentMethods.length&&"credit_card"===e.paymentMethods[0];return r()("div",{style:t.wrapper},void 0,r()("label",{style:t.header},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionPaymentForm.paymentInformation.header",defaultMessage:"Payment details"}),n?r()("div",{style:{display:"flex",gap:5}},void 0,r()("div",{},void 0,p.Z.visa({width:23})),r()("div",{},void 0,p.Z.mastercard({width:23})),r()("div",{},void 0,p.Z.amex({width:23})),r()("div",{},void 0,p.Z.dinersclub({width:23}))):null),r()("div",{style:t.container},void 0,r()(m.CardElement,{options:{disabled:"disabled"===i.payButtonState,style:{base:{iconColor:a.blueColor,color:a.regularTextColor,fontFamily:G.Z.baseFontFamily.sans,fontSmoothing:"antialiased",fontSize:"14px","::placeholder":{color:a.lightTextColor},lineHeight:"2em"},complete:{iconColor:a.blueColor},invalid:{color:l.ZP.red,iconColor:l.ZP.red}},hidePostalCode:!0}})))}function ae(e){window.__c={n:"VATCodeInput"};const t=(0,d.yK)((e=>({container:{...ie(e),borderBottom:"none"},header:{...re(e),paddingTop:20},input:{background:"none",boxShadow:"none",padding:8},subtitle:{color:e.mediumTextColor,fontSize:G.Z.fontSize.UISmall.desktop,marginTop:5,marginBottom:10}})),[]),a=(0,u.useIntl)(),[i,o]=(0,s.AF)(M.Z);return i.open&&i.vatApplicable?r()("div",{},void 0,r()("label",{style:t.header},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionPaymentForm.vatCountryCode.header",defaultMessage:"VAT (optional)"})),r()(J.Z,{placement:J.Z.Placement.Top,alignment:J.Z.Alignment.End,render:s=>n.createElement("div",q()({},s,{style:t.container}),r()(j.c,{},void 0,r()(Q.Z,{value:i.temporaryVatCode,style:t.input,disabled:e.disabled,placeholder:a.formatMessage({id:"spaceSubscriptionPaymentForm.vatCountryCode.placeholder",defaultMessage:"VAT/GST number"}),onChange:t=>{o({...i,temporaryVatCode:t.target.value}),e.onUpdate(t.target.value)}}))),disableTooltip:!e.tooltip,renderTooltip:()=>e.tooltip}),r()("div",{style:t.subtitle},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionBilling.vatCountryCode.subtitle",defaultMessage:"Please include your country code"}))):null}function ie(e){return{backgroundColor:e.cardContentBackground,borderWidth:1,borderStyle:"solid",borderColor:e.groupedFormBorder,borderRadius:3}}function re(e){return{display:"flex",alignItems:"center",marginBottom:6,fontSize:12,fontWeight:G.Z.fontWeight.semibold,color:e.mediumTextColor,justifyContent:"space-between"}}var ne=a(78291),oe=a(64921);function se(e){window.__c={n:"SegmentedItemView"};const{isFirst:t,isLast:a,isSelected:i,item:n,children:o,colors:s,onClick:l}=e,c=(0,d.yK)((e=>{const r=(null==s?void 0:s.selectedOutline)??e.blueColor,n=(null==s?void 0:s.unselectedOutline)??e.accentColors.gray[100];return{SegmentedItem:{alignItems:"center",background:i?null==s?void 0:s.selectedBackground:void 0,borderBottomLeftRadius:t?3:0,borderBottomRightRadius:a?3:0,borderColor:i?r:n,borderStyle:"solid",borderTopLeftRadius:t?3:0,borderTopRightRadius:a?3:0,borderWidth:1,cursor:"pointer",display:"flex",flexBasis:"50%",marginLeft:t?0:-1,padding:0,userSelect:"none",zIndex:i?10:0},Inner:{borderBottomLeftRadius:t?2:0,borderBottomRightRadius:a?2:0,borderColor:i?r:"transparent",borderStyle:"solid",borderTopLeftRadius:t?2:0,borderTopRightRadius:a?2:0,borderWidth:1,display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",padding:"16px 20px",textAlign:"center",width:"100%"}}}),[null==s?void 0:s.selectedBackground,null==s?void 0:s.selectedOutline,null==s?void 0:s.unselectedOutline,t,a,i]);return r()(oe.Z,{ariaLabel:n.ariaLabel,ariaPressed:i,onClick:()=>{l&&l(n.key)},style:c.SegmentedItem},void 0,r()("div",{style:c.Inner},void 0,o))}function de(e){window.__c={n:"SegmentedButton"};const{items:t=[],value:a,onChange:i,colors:n}=e,o=(0,d.yK)((e=>({SegmentedButton:{background:e.cardContentBackground,display:"flex",width:"100%"}})),[]);return 0===t.length?null:r()("div",{style:o.SegmentedButton},void 0,t.map(((e,o)=>r()(se,{isFirst:0===o,isLast:o===t.length-1,isSelected:e.key===a,item:e,colors:n,onClick:i},e.key,e.render()))))}function le(){return(0,d.yK)((e=>({discountText:{color:e.invoiceGreen,fontSize:12},icon:{width:16,height:16},mainTextSelected:{fontWeight:G.Z.fontWeight.medium,color:e.regularTextColor,fontSize:14},mainTextUnselected:{color:e.mediumTextColor,fontSize:14},priceText:{fontSize:12,color:e.mediumTextColor,marginTop:2},row:{display:"flex",alignItems:"center",justifyContent:"center",gap:4,lineHeight:"14px"},section:{marginBottom:20},sectionHeader:{display:"flex",alignItems:"center",marginBottom:11,fontSize:11,fontWeight:G.Z.fontWeight.semibold,color:e.mediumTextColor}})),[])}function ce(e){window.__c={n:"Section"};const{header:t,children:a}=e,i=le();return r()("div",{style:i.section},void 0,r()("div",{style:i.sectionHeader},void 0,t),a)}function pe(e){const{isSelected:t,billingInterval:a,subscriptionTier:i,intl:o}=e,s=le(),d=t?s.mainTextSelected:s.mainTextUnselected;let l;switch(a){case"month":l=r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.monthly",description:"Users can select this option to be billed once a month",defaultMessage:"Monthly"});break;case"year":l=r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.yearly",description:"Users can select this option to be billed once a year",defaultMessage:"Yearly"});break;default:throw new Error(`Unsupported billing interval: ${a}`)}return n.createElement(n.Fragment,null,r()("div",{style:s.row},void 0,r()("div",{style:d},void 0,l),"year"===a?r()("div",{style:s.discountText},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.yearlyDiscount",description:"Shows the amount users will save if they select the yearly billing option. The amount is a percentage like 20%",defaultMessage:"{percent}% off",values:{percent:20}})):null),r()("div",{style:s.priceText},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.memberPrice",description:"The price users will pay per month for their subscription. The price is formatted like $10",defaultMessage:"{memberPrice} / member / month",values:{memberPrice:(0,b._B)({subscriptionTier:i,intl:o})[a]}})))}function ue(e){window.__c={n:"NoThanksOption"};const{isSelected:t}=e,a=le(),i=t?a.mainTextSelected:a.mainTextUnselected;return r()("div",{style:i},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.addOnsSection.noThanks",description:"Users can select this option to not add any add-ons to their subscription",defaultMessage:"No thanks"}))}function me(e){const{isSelected:t,billingInterval:a,intl:i}=e,o=le(),s=t?o.mainTextSelected:o.mainTextUnselected;return n.createElement(n.Fragment,null,r()("div",{style:o.row},void 0,p.Z.sparkles(o.icon),r()("div",{style:s},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.addOnsSection.notionAi",description:"Users can select this option to add Notion AI to their subscription",defaultMessage:"Notion AI"}))),r()("div",{style:o.priceText},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.addOnsSection.aiMonthlyPrice",description:"Indicates the price of Notion AI per month",defaultMessage:"+{memberPrice} / member / month",values:{memberPrice:(0,b.v3)({addOnFeature:"ai",billingInterval:a,quantity:1,getMonthlyPrice:!0,intl:i}).formattedAmount}})))}function ge(e){const t=(0,u.useIntl)(),a=(0,o.O7)(),[i,d,l,c]=(0,s.VK)((()=>{var e;const t=M.Z.state,a=(null===(e=ne.default.state.data)||void 0===e?void 0:e.addOns)??[];return[t.subscriptionTier,t.temporaryBillingInterval,t.addOnFeature,(0,f.de)(a)]}),[]),p=(0,n.useMemo)((()=>[{key:"month",render:()=>r()(pe,{isSelected:"month"===d,billingInterval:"month",subscriptionTier:i,intl:t})},{key:"year",render:()=>r()(pe,{isSelected:"year"===d,billingInterval:"year",subscriptionTier:i,intl:t})}]),[d,i,t]),m=(0,n.useMemo)((()=>[{key:"none",render:()=>r()(ue,{isSelected:!l})},{key:"ai",render:()=>r()(me,{isSelected:"ai"===l,billingInterval:d??"month",intl:t})}]),[l,d,t]);return n.createElement(n.Fragment,null,r()(ce,{header:r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.header",description:"Title of the billing period section on the subscription upgrade modal",defaultMessage:"Billing period"})},void 0,r()(de,{items:p,value:d,onChange:e=>{C.trackSubscriptionUpgradeModalBillingIntervalUpdated(a,{billingInterval:e}),M.Z.update((t=>({...t,temporaryBillingInterval:e})))}})),c?null:r()(ce,{header:r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.addOnsSection.header",description:"Title of the add-ons section on the subscription upgrade modal",defaultMessage:"Add-ons"})},void 0,r()(de,{items:m,value:l??"none",onChange:e=>{const t=[];let i;switch(e){case"ai":i="ai",t.push("ai");break;default:i=void 0}C.trackSubscriptionUpgradeModalAddOnFeaturesUpdated(a,{addOnFeatures:t}),M.Z.update((e=>({...e,addOnFeature:i})))}})))}var ye=a(32056),fe=a(33665),ve=a(61519),be=a(43568),he=a(74523),Se=a(47425),Me=a(97880),we=a(24006);function Ce(e){window.__c={n:"ApplyCreditsToggle"};const[t,a]=(0,s.AF)(M.Z),i=(0,d.yK)(Te,[]),n=(0,o.O7)(),l=(0,u.useIntl)();return!t.open||e.data.availableCredit<=0||t.type!==M.U.CurrentSpace?null:r()("div",{style:i.toggle,onClick:()=>{!function(e){const{data:t,state:a,setModalState:i,environment:r}=e,n=void 0===a.temporaryUseCreditCents||a.temporaryUseCreditCents===t.availableCredit?0:t.availableCredit;i({...a,temporaryUseCreditCents:n}),C.trackCreditsInputToggled(r,{credits:n})}({environment:n,data:e.data,state:t,setModalState:a})}},void 0,r()("div",{style:{marginRight:8}},void 0,r()(u.FormattedMessage,{id:"applyCreditToggle.applyCredit.amount",defaultMessage:"Apply {creditAmount} credit",description:"Whether to apply credit to this subscription. The amount is formatted with currency",values:{creditAmount:(0,ye.Dx)({amount:e.data.availableCredit,currency:"dollar",intl:l})}})),r()(we.Z,{on:(0,b.Ry)(t,e.data)===e.data.availableCredit}))}function Te(e){return{toggle:{cursor:"pointer",fontSize:14,color:e.regularTextColor,display:"flex",justifyContent:"space-between",marginTop:14,marginBottom:7}}}var xe=a(68785),Ue=a(1063);function Fe(e){window.__c={n:"SpaceSubscriptionOrderSummary"};const{state:t,data:a,promo:i}=e,n=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},header:{fontSize:16,color:e.regularTextColor,fontWeight:G.Z.fontWeight.semibold,marginBottom:11},couponLink:{fontSize:12}})),[]),o=!t.onlyShowAddOn,s=void 0!==t.addOnFeature;return r()("div",{style:n.container},void 0,r()("label",{style:n.header},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.header",defaultMessage:"Order summary"})),o?r()(Ie,{state:t,data:a,isAddOnFeature:!1}):null,s?r()(Ie,{state:t,data:a,isAddOnFeature:!0}):null,b.Fu(t.subscriptionTier)&&r()(Ue.X,{tier:t.subscriptionTier}),0!==a.availableCredit&&r()(Ce,{data:a}),r()(ve.Z,{size:1}),r()(Ae,{state:t,data:a,promo:i,style:{marginBottom:8}}),r()(Ze,{state:t,data:a,promo:i}))}function Ze(e){window.__c={n:"OrderTotal"};const{state:t,data:a,promo:i}=e,{payAmount:n}=b.uN({state:t,promo:i,data:a}),o=(0,d.yK)((e=>({name:{fontSize:16,color:e.regularTextColor},price:{fontSize:20,lineHeight:"20px"}})),[]);return r()(ke,{lineItem:{price:n,type:"standard",name:r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeOrderSummary.totalForToday",defaultMessage:"Total for today"})},nameStyle:o.name,priceStyle:o.price})}function Ae(e){window.__c={n:"OrderBreakdown"};const{state:t,data:a,promo:i,style:n}=e,{lineItems:o}=b.uN({state:t,promo:i,data:a}),s=o.map((e=>r()(ke,{lineItem:e},`${e.name}:${e.price}:${e.type}`)));return r()("div",{style:n},void 0,s)}function ke(e){window.__c={n:"LineItem"};const{lineItem:t,nameStyle:a,priceStyle:i,showZeroPrice:n}=e,o=(0,d.yK)((e=>({container:{marginTop:24},itemContainer:{display:"flex",justifyContent:"space-between",alignItems:"baseline",lineHeight:1.7},name:{fontSize:14,color:e.mediumTextColor,...a||void 0},price:{fontSize:14,color:"promotion"===t.type?"#53A83F":e.regularTextColor,...i||void 0},caption:{fontSize:12,color:e.mediumTextColor},captionContainer:{display:"flex",flexDirection:"column"}})),[t,a,i]),s=(0,u.useIntl)(),l=t.price??0,c=void 0!==t.price&&n,p=l>0||c?(0,ye.Dx)({amount:l,currency:"dollar",intl:s}):"—";return r()("div",{style:o.itemContainer},void 0,r()("div",{style:o.captionContainer},void 0,r()("span",{style:o.name},void 0,t.name),t.subtitle&&r()("span",{style:o.caption},void 0,t.subtitle)),"calculating"===t.type?r()(xe.Z,{}):r()("span",{style:o.price},void 0,p))}function Ie(e){window.__c={n:"SpaceSubscriptionGrossOrder"};const{state:t,data:a,isAddOnFeature:i}=e,n=(0,u.useIntl)(),o=function(e,t){const{subscriptionTier:a}=e;if(t)return r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.ai.addOn",defaultMessage:"Notion AI",description:"Line item shown when summarizing plan upgrade"});if((0,Se.QM)(a)||(0,Se.iJ)(a))return;switch(a){case"personal":return r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.singlePlayerPlusPlan",defaultMessage:"Plus plan with a 1-member limit",description:"Line item shown when summarizing plan upgrade"});case"plus":case"team":return r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.plusPlan",defaultMessage:"Plus plan",description:"Line item shown when summarizing plan upgrade"});case"business":return r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.businessPlan",defaultMessage:"Business plan",description:"Summarizes the business plan type a user is trying to upgrade to."});case"enterprise":return r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.enterprisePlan",defaultMessage:"Enterprise plan"});default:(0,Me.t1)(a)}}(t,i),s=function(e,t,a,i){const{subscriptionTier:n,addOnFeature:o}=e,s=b.GD(e),d=b.su(t);let l;if(i&&void 0!==o)l=b.v3({addOnFeature:o,billingInterval:s,quantity:1,getMonthlyPrice:!0,intl:a}).formattedAmount;else{if((0,Se.QM)(n)||(0,Se.iJ)(n))return null;l=b._B({subscriptionTier:n,intl:a})[s]}switch(s){case"year":return r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedYearly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed yearly",values:{br:r()("br",{}),price:l,numberOfMembers:d}});case"month":return r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedMonthly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed monthly",values:{br:r()("br",{}),price:l,numberOfMembers:d}});default:(0,Me.t1)(s)}}(t,a,n,i),l=b.su(a),{planAmount:c}=b.ZT({state:t,memberCount:l,isAddOnFeature:i}),p=(0,d.yK)((e=>({container:{display:"flex",justifyContent:"space-between"},item:{},title:{fontSize:14,fontWeight:G.Z.fontWeight.medium,marginBottom:4},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14}})),[]);return r()("div",{style:p.container},void 0,r()("div",{style:p.item},void 0,r()("div",{style:p.title},void 0,o),r()("div",{style:p.subtitle},void 0,s)),r()("div",{style:p.price},void 0,(0,ye.Dx)({amount:c,currency:"dollar",intl:n})))}function Pe(e){window.__c={n:"SpaceSubscriptionOrderSummaryForClaimAndUpgrade"};const{state:t}=e,a=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"column"},header:{fontSize:16,color:e.regularTextColor,fontWeight:G.Z.fontWeight.semibold,marginBottom:10},couponLink:{fontSize:12},helpButton:{marginLeft:0,marginTop:-4,marginBottom:12},helpButtonInner:{fontSize:12}})),[]),i=t.taxAmount,o=t.calculatingTax,s=void 0!==t.totalUpgradeCost?Math.max(0,t.totalUpgradeCost+(i&&!o?i:0)):void 0;return r()("div",{style:a.container},void 0,r()("label",{style:a.header},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.header",defaultMessage:"Order summary"})),void 0!==t.totalUpgradeCost?n.createElement(n.Fragment,null,r()(Oe,{totalCostForUpgrade:t.totalUpgradeCost,memberCount:t.targetSpace.memberCount}),r()(he.Z,{style:a.helpButton,buttonStyle:a.helpButtonInner,title:r()(u.FormattedMessage,{id:"invoice.details.helpButton.label",defaultMessage:"Learn more about prorated charges"}),href:(0,fe.UY)("guides.billingAndPayment"),analyticsFrom:"invoices"}),r()(Be,{state:t}),r()(ve.Z,{size:14}),r()(ke,{showZeroPrice:!0,lineItem:{price:s,type:"standard",name:r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeOrderSummary.orderTotal",defaultMessage:"Total"})},priceStyle:{fontSize:20}})):r()(_e,{}))}function Be(e){return n.createElement(n.Fragment,null,r()(ke,{showZeroPrice:!0,lineItem:{type:"standard",name:r()(u.FormattedMessage,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"}),price:e.state.totalUpgradeCost}}),r()(ke,{lineItem:{type:e.state.calculatingTax?"calculating":"standard",name:r()(u.FormattedMessage,{id:"subscriptionHelpers.lineItems.tax.title",defaultMessage:"Tax"}),price:e.state.taxAmount,subtitle:e.state.taxAmount||0===e.state.taxAmount?void 0:r()(u.FormattedMessage,{id:"subscriptionHelpers.lineItems.tax.subtitle",defaultMessage:"if applicable"})}}))}function Oe(e){window.__c={n:"SpaceUpgradeCostOrder"};const{totalCostForUpgrade:t,memberCount:a}=e,i=(0,u.useIntl)(),n=(0,d.yK)((e=>({container:{display:"flex",justifyContent:"space-between",marginBottom:6},item:{},title:{fontSize:14},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14,color:e.regularTextColor}})),[]);return r()("div",{style:n.container},void 0,r()("div",{style:n.item},void 0,r()("div",{style:n.title},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.proratedChanges",defaultMessage:"Prorated charges",description:"Explains that the price listed here is for prorated charges."})),r()("div",{style:n.subtitle},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.proratedChangesCaption",defaultMessage:"All charges due to claim and upgrade the workspace ({memberCount, plural, one {{memberCount} member} other {{memberCount} members}}).",description:"Explains that prorated charges will be due to upgrade the workspace.",values:{memberCount:a}}))),r()("div",{style:n.price},void 0,(0,ye.Dx)({amount:t,currency:"dollar",intl:i})))}function _e(){return n.createElement(n.Fragment,null,r()(be.Z,{paragraphs:[{lineHeight:18,lineMargin:4,sectionWidths:[100],repeat:1,sectionMargin:0},{lineHeight:14,lineMargin:4,sectionWidths:[100,40],repeat:1,sectionMargin:-2}]}),r()("div",{style:{display:"block",height:27}}),r()(be.Z,{paragraphs:[{lineHeight:16,lineMargin:1,sectionWidths:[100],repeat:2,sectionMargin:4}]}),r()(be.Z,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[30],repeat:1,sectionMargin:4}]}),r()(ve.Z,{size:14}),r()(be.Z,{paragraphs:[{lineHeight:24,lineMargin:4,sectionWidths:[100],repeat:1,sectionMargin:1}]}))}var ze=a(10644),Ee=a(60709),We=a(52275),De=a(31945),Le=a(78140),Ne=a(9342),Ke=a(63296),Re=a(72495);function He(e){window.__c={n:"CheckoutBillingIntervalSection"};const{state:t,data:a,theme:i}=e,l=(0,u.useIntl)(),c=(0,d.yK)((e=>({outlineButton:{marginBottom:4,width:"100%",justifyContent:"space-between"},section:{marginBottom:20},subheader:{display:"flex",alignItems:"center",marginBottom:6,fontSize:12,fontWeight:G.Z.fontWeight.semibold,color:e.mediumTextColor}})),[]),m=(0,o.O7)(),[g,y]=(0,s.VK)((()=>{var e;return[i.lightIconColor,null===(e=h.default.state.currentSpaceStore)||void 0===e?void 0:e.id]}),[i]);if(!y)return null;if(t.addOnFeature)return M.Z.update((e=>({...e,temporaryBillingInterval:"month"}))),null;const f=t.appliedPromo,{yearlyUnitPrice:v,monthlyUnitPrice:S}=t.type===M.U.TargetSpace?b.ZT({state:t,memberCount:t.targetSpace.memberCount,isAddOnFeature:void 0!==t.addOnFeature}):b.uN({state:t,promo:f,data:a}),w=b.GD(t),T=1-v/(12*S),x=b.x7(t,T,l),U=x.find((e=>e.id===w))||x[0],F=r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.upgradeModal.billingIntervalSection.header",defaultMessage:"Billing interval"});return r()("div",{style:c.section},void 0,r()("div",{style:c.subheader},void 0,r()("div",{},void 0,F)),r()(De.Z,{popupType:De.Z.PopupType.Popup,placementToOrigin:De.Z.Placement.Bottom,sameWidthAsOrigin:!0,renderOrigin:e=>n.createElement(Ke.Z,q()({},e,{isLarge:!0,style:c.outlineButton}),U.title,p.Z.chevronDown({width:10,marginLeft:4,fill:g})),render:e=>{const a={menuType:Ee.og.Popup,width:"100%"},i=x.map((a=>({key:a.id,action:a=>{const i=x[a.index].id;M.Z.update((e=>({...e,temporaryBillingInterval:i}))),C.trackSubscriptionUpgradeModalBillingIntervalUpdated(m,{billingInterval:i}),async function(e){const{environment:t,spaceId:a,state:i}=e;await _({environment:t,spaceId:a,state:i}),await A.W(t)}({environment:m,spaceId:y,state:t}),e.close()},render:e=>n.createElement(We.Z,q()({},e,{title:a.title}))})));return n.createElement(Le.Z,a,r()("div",{style:{width:"100%"}},void 0,r()(Ne.Z,{type:Ne.i.Vertical,sections:[{key:"billing interval section",render:e=>n.createElement(Re.Z,e),items:i}],initialFocus:void 0})))}}))}var Ve=a(42402);function qe(e){const{state:t}=e,{addOnFeature:a,onlyShowAddOn:i}=t,n=(0,d.yK)((e=>({addOnTermsOfService:{color:e.mediumTextColor,fontSize:12,paddingTop:16,lineHeight:G.Z.lineHeight.UISmall.desktop}})),[]);return r()("div",{style:n.addOnTermsOfService},void 0,r()(u.FormattedMessage,"ai"===a?i?{id:"subscriptionUpgradeModal.confirmation.aiOnly",defaultMessage:"By clicking “Upgrade now” you agree to the <aiTerms>Notion AI Product Specific Terms</aiTerms>.{br}{br}Performance subject to fair use policies.{br}<fairUsePolicies>Learn more</fairUsePolicies>.",description:"Shown as a warning in the confirmation modal before a user subscribes to an add-on so they understand how it affects their subscription.",values:{br:r()("br",{}),fairUsePolicies:e=>r()(Ve.Z,{href:(0,fe.UY)("ai.fairUsePolicies")},void 0,e),aiTerms:e=>r()(Ve.Z,{href:(0,fe.UY)("ai.terms")},void 0,e)}}:{id:"subscriptionUpgradeModal.confirmation.planWithAi",defaultMessage:"By clicking “Upgrade now” you agree to the <terms>Notion Terms and Conditions</terms> and <aiTerms>Notion AI Product Specific Terms</aiTerms>.{br}{br}Performance subject to fair use policies.{br}<fairUsePolicies>Learn more</fairUsePolicies>.",description:"Shown as a warning in the confirmation modal before a user subscribes to an add-on so they understand how it affects their subscription.",values:{br:r()("br",{}),terms:e=>r()(Ve.Z,{href:(0,fe.UY)("terms")},void 0,e),fairUsePolicies:e=>r()(Ve.Z,{href:(0,fe.UY)("ai.fairUsePolicies")},void 0,e),aiTerms:e=>r()(Ve.Z,{href:(0,fe.UY)("ai.terms")},void 0,e)}}:{id:"subscriptionUpgradeModal.confirmation.planOnly",defaultMessage:"By clicking “Upgrade now” you agree to the <terms>Notion Terms and Conditions</terms>.",description:"Shown as a warning in the confirmation modal before a user upgrades their plan so they understand how it affects their subscription.",values:{terms:e=>r()(Ve.Z,{href:(0,fe.UY)("terms")},void 0,e)}}))}var Ye=a(64369);function Ge(e){window.__c={n:"CheckoutErrorMessage"};const{state:t}=e,{error:a}=t,i=(0,d.yK)((()=>({label:{marginTop:8,color:l.ZP.red}})),[]);return a?r()(Ye.Z,{isMultiline:!0,style:i.label},void 0,a):null}var je=a(42922);function $e(e){window.__c={n:"UpgradeButtonText"};const{state:t}=e;return t.open&&t.type===M.U.TargetSpace?r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.targetSpace.button.enterprise",defaultMessage:"Claim & Upgrade to Enterprise",description:"Button on billing page to pay and complete the claiming and upgrade flow"}):t.useTestClock?n.createElement(n.Fragment,null,"Upgrade with test clock"):r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeButton.upgradeNow",defaultMessage:"Upgrade now",description:"Button on upgrade modal to confirm"})}function Qe(e){window.__c={n:"CheckoutUpgradeButton"};const{state:t,paymentOptionAvailabilityStore:a,onClickUpgrade:i}=e,n=(0,d.yK)((e=>({upgradeButton:{width:"100%",height:40,marginTop:24,fontSize:16}})),[]),o=(0,s.VK)((()=>a.state.supportsApplePay),[a]),l=t.temporaryPaymentMethod;return o&&"native_payment_platform"===l?r()("button",{style:{...n.upgradeButton,WebkitAppearance:"-apple-pay-button"},onClick:i}):r()(je.Z,{disabled:"disabled"===t.payButtonState,style:n.upgradeButton,onClick:i},void 0,r()($e,{state:t}))}var Je=a(10161),Xe=a(73796);function et(e){const{state:t}=e,a=(0,o.O7)(),i=(0,u.useIntl)(),l=(0,d.yK)((e=>({contactSalesButton:{width:"100%",height:40,marginTop:10},contactSalesCta:{fontWeight:G.Z.fontWeight.medium},contactSalesIcon:{height:18,width:20,marginRight:6},contactSalesQuestionsText:{color:e.mediumTextColor,fontSize:12,lineHeight:G.Z.lineHeight.UISmall.desktop}})),[]),[c,m]=(0,s.VK)((()=>{const e=Je.default.getEligibleGroup({experimentId:"in_app_contact_sales_cta_billing",defaultGroup:"control"});return[t.subscriptionTier,e]}),[t]);if(!(0,Se.Rs)(c))return null;const g=r()(u.FormattedMessage,"on"===m?{defaultMessage:"Request a demo",id:"helpButton.salesChat.menuItemDemoVariant",description:"Title for help menu item prompting the user to request a demo from the sales team."}:{id:"spaceSubscriptionSettings.upgradeModal.contactSales",defaultMessage:"Contact sales",description:"Shown below the upgrade button in case users want to do a trial of the subscription before purchasing."});return n.createElement(n.Fragment,null,r()(Ke.Z,{style:l.contactSalesButton,onClick:()=>{const{currentUserStore:e}=h.default.state,r=null!=e&&e.isDefined()?null==e?void 0:e.getModel():void 0;Xe.Z.setState({open:!0,email:r&&r.getEmail(),name:r&&r.getDisplayName(i),question:b.m_(t.subscriptionTier)}),C.trackEnterpriseSalesContactOpened(a)}},void 0,p.Z.chat(l.contactSalesIcon),r()("span",{style:l.contactSalesCta},void 0,g)),r()("p",{style:l.contactSalesQuestionsText},void 0,r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.upgradeModal.sales.questions",defaultMessage:"Questions? Contact our sales team for more information."})))}function tt(e){const{state:t,paymentOptionAvailabilityStore:a,onClickUpgrade:i}=e;return n.createElement(n.Fragment,null,r()(Qe,{state:t,paymentOptionAvailabilityStore:a,onClickUpgrade:i}),r()(qe,{state:t}),r()(Ge,{state:t}),r()(et,{state:t}))}var at=a(46978);function it(){return(0,d.yK)((e=>({radioButton:{cursor:"pointer"},radioButtonUnavailable:{opacity:.4},radioButtonCaption:{color:e.mediumTextColor,fontSize:12,marginLeft:24,marginTop:2,marginBottom:8},radioButtonTitle:{display:"flex",alignItems:"center",fontSize:12},subheader:{display:"flex",alignItems:"center",marginBottom:6,fontSize:12,fontWeight:G.Z.fontWeight.semibold,color:e.mediumTextColor}})),[])}function rt(e){window.__c={n:"RadioButton"};const{title:t,caption:a,isSelected:i,onClick:n,unavailable:o}=e,s=it();return r()("div",{style:o?s.radioButtonUnavailable:s.radioButton,onClick:n},void 0,r()("div",{style:s.radioButtonTitle},void 0,r()(at.Z,{isSelected:i}),t),r()("div",{style:s.radioButtonCaption},void 0,a))}function nt(e){window.__c={n:"CheckoutPaymentMethodSection"};const{state:t,paymentOptionAvailabilityStore:a}=e,i=(0,o.O7)(),n=it(),d=(0,s.VK)((()=>a.state.availablePaymentMethods),[a]),l=t.temporaryPaymentMethod,c=r()(u.FormattedMessage,{id:"spaceSubscriptionSettings.upgradeModal.paymentMethodSection.header",defaultMessage:"Payment method"}),p=b.E$({state:t,availablePaymentMethods:d});if(p.length<2)return null;const m=b.zt(p);return r()("div",{},void 0,r()("div",{style:n.subheader},void 0,r()("div",{},void 0,c)),m.map((e=>{let{type:t,title:a,caption:n}=e;return r()(rt,{title:a,caption:n,isSelected:l===t,onClick:()=>{M.Z.update((e=>({...e,temporaryPaymentMethod:t}))),C.trackSubscriptionUpgradeModalPaymentMethodUpdated(i,{paymentMethod:t})},unavailable:!1},t)})))}var ot=a(38755),st=a(5059);function dt(e){const{state:t}=e,{onlyShowAddOn:a,addOnFeature:i}=t,n=(0,o.O7)(),d=(0,s.VK)((()=>{const e=h.default.state.currentSpaceStore;if(e)return(0,ot.rn)(n,e)}),[n]);if(!d)return null;if(a&&i)switch(i){case"ai":return r()(u.FormattedMessage,{id:"addOnUpgrade.confirmation.description.admins",defaultMessage:"Go unlimited with Notion AI for all members in {spaceName}.",description:"Shown when a customer has run out of Notion AI and needs to upgrade.",values:{spaceName:d}});default:(0,Me.t1)(i)}switch(t.subscriptionTier){case"personal":return r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.oneLiner.personal",defaultMessage:"For power users who want to do even more."});case"plus":case"team":case"business":return r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.oneLiner.team",defaultMessage:"Write, plan, and work together in one spot."});case"enterprise":return r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.oneLiner.enterprise",defaultMessage:"Controls and support to run your company."});default:(0,Me.t1)(void 0)}}function lt(e){const{state:t}=e,{onlyShowAddOn:a,addOnFeature:i,subscriptionTier:n}=t;if(t.type===M.U.TargetSpace)return r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.targetSpace.title.enterprise",defaultMessage:"Claim & Upgrade to Enterprise",description:"Title for billing page for the workspace claim and upgrade flow"});if(a&&i)switch(i){case"ai":return r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.ai.addOn.title",defaultMessage:"Get more Notion AI",description:"Title for ai add-on upgrade flow"});default:(0,Me.t1)(i)}return(0,Se.QM)(n)||(0,Se.iJ)(n)?null:{personal:r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.title.personal",defaultMessage:"Upgrade to Personal Pro"}),plus:r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.title.plus",defaultMessage:"Upgrade to Plus",description:"Shown when a user is going to upgrade to a plus plan type."}),team:r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.title.plus",defaultMessage:"Upgrade to Plus",description:"Shown when a user is going to upgrade to a plus plan type."}),business:r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlan",defaultMessage:"Upgrade to Business",description:"Shown when a user is going to upgrade to a business plan type."}),enterprise:r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.title.enterprise",defaultMessage:"Upgrade to Enterprise"}),team_free:r()(u.FormattedMessage,{id:"subscriptionUpgradeModal.title.teamFree",defaultMessage:"Upgrade to Team Trial"})}[n]}function ct(e){const{state:t,theme:a}=e,{onlyShowAddOn:i}=t,o=function(e){const t=e.open&&e.onlyShowAddOn;return(0,d.yK)((e=>({primaryTextStyle:{fontWeight:G.Z.fontWeight.bold,fontSize:20,lineHeight:1.1,marginTop:24,marginBottom:6},secondaryTextStyle:{fontWeight:G.Z.fontWeight.regular,fontSize:16,lineHeight:1.4,marginBottom:22,width:t?"70%":void 0,color:e.mediumTextColor}})),[t])}(t);return n.createElement(n.Fragment,null,(0,st.T)({tier:t.subscriptionTier,mode:a.mode,onlyShowAddOn:i}),r()("div",{style:o.primaryTextStyle},void 0,r()(lt,{state:t})),r()("div",{style:o.secondaryTextStyle},void 0,r()(dt,{state:t})))}function pt(){return(0,d.yK)((e=>({closeButton:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:21,right:20,width:22,height:22,padding:0,borderRadius:"50%",border:"none",background:"light"===e.mode?l.FN.light.gray[75]:l.FN.dark.gray[500],zIndex:10},closeButtonIcon:{width:12,height:12,fill:"light"===e.mode?l.FN.light.gray[400]:l.FN.dark.gray[800]},modal:{background:e.popoverBackground,borderRadius:12,width:750,maxHeight:760,display:"flex"},modalContent:{flex:1,maxWidth:"60%",backgroundColor:e.modalBackground,display:"flex",flexDirection:"column",position:"relative",borderRadius:"12px 0 0 12px"},modalContentBody:{padding:"36px 42px 50px 42px",display:"flex",flexDirection:"column"},modalContentSidebar:{flex:1,maxWidth:"40%",backgroundColor:e.sidebarSecondaryBackground,borderLeft:`1px solid ${e.lightDividerColor}`,padding:"20px 29px 50px 27px",display:"flex",flexDirection:"column"}})),[])}function ut(e){const{state:t,data:a,requestingSpaceId:i,theme:d,stripe:l,elements:c,paymentOptionAvailabilityStore:m}=e,g=(0,o.O7)(),y=(0,u.useIntl)(),f=pt(),[v,h,S]=(0,s.VK)((()=>{const e=(0,W.C0)()&&!t.onlyShowAddOn&&t.type===M.U.CurrentSpace;return[L.Z.state.online,m.state.availablePaymentMethods,e]}),[]);if(!t.open)return null;if(!v)return r()(ze.Z,{});const w=b.E$({state:t,availablePaymentMethods:h});return n.createElement(n.Fragment,null,r()("div",{style:f.modalContent},void 0,r()(H.Z,{type:D.Z.Y,showScrollToBottomIndicator:!0},void 0,r()("div",{style:f.modalContentBody},void 0,r()(ct,{state:t,theme:d}),S?r()(ge,{}):r()(He,{state:t,data:a,theme:d}),r()(nt,{state:t,paymentOptionAvailabilityStore:m}),r()(ee,{storeState:t,paymentMethods:w})))),r()("div",{style:f.modalContentSidebar},void 0,r()(H.Z,{type:D.Z.Y},void 0,r()(mt,{state:t,data:a}),r()(tt,{state:t,paymentOptionAvailabilityStore:m,onClickUpgrade:()=>B({environment:g,intl:y,state:t,stripe:l,elements:c,data:a,requestingSpaceId:i,paymentOptionAvailabilityStore:m})}))),r()("button",{style:f.closeButton,onClick:()=>{M.Z.setState({open:!1})}},void 0,p.Z.close(f.closeButtonIcon)))}function mt(e){const{state:t,data:a}=e;return t.type===M.U.TargetSpace?r()(Pe,{state:t}):r()(Fe,{state:t,data:a,promo:t.appliedPromo})}const gt=(0,v.injectStripe)((0,u.injectIntl)((function(e){window.__c={n:"SpaceSubscriptionUpgradeModal"};const{data:t,spaceStore:a,stripe:i,elements:l}=e,p=(0,s.VK)((()=>M.Z.state),[]),m=(0,o.O7)(),g=(0,u.useIntl)(),y=pt(),f=(0,d.Fg)(),v=(0,n.useMemo)((()=>new N.Z),[]),[b,S]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{var e;const{state:a}=M.Z;if(!a.open)return;const i=null===(e=h.default.state.currentSpaceStore)||void 0===e?void 0:e.id;i&&_({environment:m,state:a,spaceId:i});const{currentUserStore:r}=h.default.state,n=null!=r&&r.isDefined()?r.getModel():void 0;if(n){const e=n.getDisplayName(g);var o;if(M.Z.setState({...a,temporaryAddress:{...a.temporaryAddress,name:e}}),"subscribed_admin"===t.type||"unsubscribed_admin"===t.type)M.Z.setState({...a,appliedPromo:null===(o=t.customerData)||void 0===o?void 0:o.stripe.promo})}["local","development","staging"].includes(E.Z.env)&&(0,c.exposeDebugValue)("useTestClock",(()=>{M.Z.setUseTestClock(!0)}))}),[]),(0,n.useEffect)((()=>{if(!i||b)return;const e=i.paymentRequest({country:"US",currency:"usd",total:{label:g.formatMessage({id:"spaceSubscriptionUpgradeModal.applePay.total.label",defaultMessage:"Notion - You will be charged on a recurring basis"}),amount:0}});e.canMakePayment().then((t=>{t&&(v.update((a=>({...a,supportsApplePay:t.applePay,paymentRequest:e}))),v.addPaymentOption("native_payment_platform"))})),e.on("token",(async e=>{const a=M.Z.state;if(!a.open)return;const{valid:i}=await z({environment:m,state:a,intl:g});i?O({environment:m,data:t,stripeToken:e.token.id,onComplete:e.complete}):e.complete("fail")})),S(!0)}),[i,b,t,m,g,v]),r()(R.Z,{open:p.open,preventHideChildrenWhileOpening:!0,innerStyle:y.modal,render:()=>r()(K.Z,{capture:!0,allowEsc:!0,render:()=>p.open?r()(ut,{state:p,data:t,theme:f,stripe:i,elements:l,requestingSpaceId:a.id,paymentOptionAvailabilityStore:v}):null}),onDismiss:()=>I({environment:m})})})))},1063:(e,t,a)=>{a.d(t,{X:()=>p});var i=a(77094),r=a.n(i),n=(a(67294),a(480)),o=a(24405),s=a(5366),d=a(50906),l=a(8323),c=a(42402);function p(e){window.__c={n:"StartupCouponInlineTextLink"};const t=(0,n.O7)(),a=(0,o.yK)((()=>({couponLink:{fontSize:12}})),[]);return r()(c.Z,{href:"https://notionup.typeform.com/to/qYXezfBW",external:!0,style:a.couponLink,onClick:()=>{const a=(0,l.zt)();d.trackCouponTypeformClicked(t,{tier:e.tier,currentTier:a})}},void 0,r()("div",{},void 0,r()(s.FormattedMessage,{id:"startupCouponInlineLink.text",defaultMessage:"Are you a startup?",description:"Shown in our billing/upgrade settings to ask if a user's workspace belongs to a startup."})))}},80366:(e,t,a)=>{a.d(t,{s:()=>o,c:()=>s});var i=a(77094),r=a.n(i),n=(a(67294),a(24405));function o(e){return{backgroundColor:e.groupedFormBackground,borderWidth:1,borderStyle:"solid",borderColor:e.groupedFormBorder,borderRadius:3,borderBottomWidth:0}}function s(e){window.__c={n:"FormGroup"};const t=(0,n.yK)((t=>({group:{display:"flex",borderBottomColor:t.groupedFormBorder,borderBottomWidth:1,borderBottomStyle:"solid",alignItems:"center",flex:1,...e.style}})),[e.style]);return r()("div",{style:t.group},void 0,e.children)}},16100:(e,t,a)=>{a.r(t),a.d(t,{injectStripe:()=>p,getStripe:()=>u,translateStripeError:()=>m});var i=a(77094),r=a.n(i),n=a(86664),o=a(97894),s=a(67294),d=a(50906),l=a(95477);let c=null;function p(e){return t=>{const[a]=s.useState(u);return r()(n.Elements,{stripe:a},void 0,r()(n.ElementsConsumer,{},void 0,(a=>{let{stripe:i,elements:r}=a;const n={...t,stripe:i,elements:r};return s.createElement(e,n)})))}}async function u(){return c||(o.loadStripe.setLoadParameters({advancedFraudSignals:!1}),c=(0,o.loadStripe)(l.Z.stripe.key)),c}function m(e,t,a){if(!a.code)return a.message||"";switch(d.trackStripeErrorMessage(e,{error:a.code,stripe_decline_code:a.decline_code}),a.code){case"invalid_expiry_year_past":return t.formatMessage({id:"stripeHelpers.invalidExpiryYear.error.message",defaultMessage:"Your card's expiration year is in the past."});case"invalid_cvc":return t.formatMessage({id:"stripeHelpers.invalidCVC.error.message",defaultMessage:"Your card's security code is invalid."});case"invalid_number":return t.formatMessage({id:"stripeHelpers.invalidNumber.error.message",defaultMessage:"Your card number is not a valid credit card number."});case"card_declined":return function(e,t){switch(t){case"expired_card":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.expiredCard",defaultMessage:"Your card was declined because it is an expired card.",description:"Shown as an error message if a user's card was declined."});case"incorrect_number":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.incorrectNumber",defaultMessage:"Your card was declined because you input an incorrect number.",description:"Shown as an error message if a user's card was declined."});case"insufficient_funds":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.declinedFunds",defaultMessage:"Your card was declined because of insufficient funds.",description:"Shown as an error message if a user's card was declined."});case"invalid_cvc":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.invalidCvc",defaultMessage:"Your card was declined because you input an invalid CVC number",description:"Shown as an error message if a user's card was declined."});case"invalid_amount":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.invalidAmount",defaultMessage:"Your card was declined because payment amount exceeds the amount that's allowed.",description:"Shown as an error message if a user's card was declined."});default:return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message",defaultMessage:"Your card was declined.",description:"Shown as an error message if a user's card was declined."})}}(t,a.decline_code);default:return a.message||""}}},45407:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(96486),r=a.n(i),n=a(49085);class o extends n.Z{getInitialState(){return{availablePaymentMethods:["credit_card"],paymentRequest:void 0,supportsApplePay:!1}}isPaymentOptionAvailable(e){return this.state.availablePaymentMethods.includes(e)}addPaymentOption(e){const t=r().uniq([...this.state.availablePaymentMethods,e]);this.setState({...this.state,availablePaymentMethods:t})}}const s=o},19234:(e,t,a)=>{a.d(t,{gq:()=>i});a(96486);function i(e){return e.country&&(t=e.country,!["US","CA"].includes(t))?"skip":e.addressLine1&&e.zipCode||e.addressLine1&&e.city&&e.state||e.zipCode?"should_resolve":"insufficient_data";var t}}}]);